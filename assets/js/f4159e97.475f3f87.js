"use strict";(self.webpackChunknotes_3_5_2=self.webpackChunknotes_3_5_2||[]).push([[5281],{6026:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>a,toc:()=>u});var o=t(4848),r=t(8453);const l={},s="loguru",a={id:"loguru",title:"loguru",description:"",source:"@site/notes/python/loguru.md",sourceDirName:".",slug:"/loguru",permalink:"/notes/python/loguru",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"jupyter",permalink:"/notes/python/jupyter"},next:{title:"Makefile",permalink:"/notes/python/makefile"}},i={},u=[];function c(e){const n={code:"code",h1:"h1",header:"header",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"loguru",children:"loguru"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# log.py\nimport sys\nfrom pathlib import Path\nfrom loguru import logger\n\n# \u65e5\u5fd7\u76ee\u5f55\nLOG_DIR = Path("logs")\nLOG_DIR.mkdir(exist_ok=True)\n\n# \u79fb\u9664\u9ed8\u8ba4\u7684 stderr \u8f93\u51fa\uff08\u907f\u514d\u91cd\u590d\uff09\nlogger.remove()\n\n# \u63a7\u5236\u53f0\u8f93\u51fa\uff08\u5e26\u989c\u8272\uff09\nlogger.add(\n    sys.stdout,\n    level="DEBUG",\n    format="<green>{time:YYYY-MM-DD HH:mm:ss}</green> | "\n    "<level>{level: <8}</level> | "\n    "<cyan>{name}</cyan>:<cyan>{function}</cyan>:<cyan>{line}</cyan> - "\n    "<level>{message}</level>",\n    colorize=True,\n)\n\n# \u6587\u4ef6\u8f93\u51fa - \u6309\u5929\u8f6e\u8f6c\uff0c\u4fdd\u75597\u5929\uff0cINFO\u7ea7\u522b\u4ee5\u4e0a\nlogger.add(\n    LOG_DIR / "app_{time:YYYY-MM-DD}.log",\n    rotation="1 day",\n    retention="7 days",\n    level="INFO",\n    format="{time:YYYY-MM-DD HH:mm:ss} | {level: <8} | {name}:{function}:{line} - {message}",\n    encoding="utf-8",\n)\n\n# \u9519\u8bef\u65e5\u5fd7\u5355\u72ec\u8bb0\u5f55\uff08ERROR \u53ca\u4ee5\u4e0a\uff09\nlogger.add(\n    LOG_DIR / "error_{time:YYYY-MM-DD}.log",\n    rotation="1 day",\n    retention="14 days",\n    level="ERROR",\n    format="{time:YYYY-MM-DD HH:mm:ss} | {level: <8} | {name}:{function}:{line} - {message}",\n    encoding="utf-8",\n)\n\n# \u53ef\u9009\uff1a\u8f93\u51fa JSON \u683c\u5f0f\u65e5\u5fd7\uff08\u4fbf\u4e8e ELK \u7b49\u6536\u96c6\uff09\n# logger.add(\n#     LOG_DIR / "app_json.log",\n#     format="{message}",\n#     serialize=True,  # \u8f93\u51fa JSON\n#     level="INFO",\n# )\n\n# \u5bfc\u51fa logger \u5b9e\u4f8b\u4f9b\u5176\u6a21\u5757\u4f7f\u7528\n__all__ = ["logger"]\n'})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(6540);const r={},l=o.createContext(r);function s(e){const n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);