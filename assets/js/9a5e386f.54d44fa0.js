"use strict";(self.webpackChunknotes_3_5_2=self.webpackChunknotes_3_5_2||[]).push([[530],{8453:(n,e,t)=>{t.d(e,{R:()=>c,x:()=>s});var r=t(6540);const o={},i=r.createContext(o);function c(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:c(n.components),r.createElement(i.Provider,{value:e},n.children)}},8786:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var r=t(4848),o=t(8453);const i={},c="Makefile",s={id:"makefile",title:"Makefile",description:"",source:"@site/notes/python/makefile.md",sourceDirName:".",slug:"/makefile",permalink:"/notes/python/makefile",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"loguru",permalink:"/notes/python/loguru"},next:{title:"mitmproxy",permalink:"/notes/python/mitmproxy"}},a={},l=[];function p(n){const e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"makefile",children:"Makefile"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-makefile",children:'# \u4ece\u73af\u5883\u53d8\u91cf\u6216 .env \u6587\u4ef6\u52a0\u8f7d\u914d\u7f6e\uff0c\u4f46\u5141\u8bb8\u547d\u4ee4\u884c\u8986\u76d6\nENV_FILE ?= .env\n\n# \u5c1d\u8bd5\u5bfc\u5165\u73af\u5883\u53d8\u91cf\uff0c\u4f46\u8ba9\u547d\u4ee4\u884c\u53c2\u6570\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\n-include $(ENV_FILE)\n\n# \u5982\u679c\u53d8\u91cf\u672a\u8bbe\u7f6e\uff0c\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\uff08\u8fd9\u5c06\u5728\u547d\u4ee4\u884c/\u73af\u5883\u53d8\u91cf\u4e4b\u540e\u6267\u884c\uff09\nifndef SERVER_HOST\nSERVER_HOST := 127.0.0.1\nendif\n\nifndef SERVER_PORT\nSERVER_PORT := 8080\nendif\n\nexport\n\nPYTHON ?= python3\nVENV ?= .venv\nACTIVATE ?= source $(VENV)/bin/activate\n\n.PHONY: help install run dev test clean db-upgrade\n\n# \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\nhelp:\n\t@echo "FastAPI JWT Authentication System"\n\t@echo ""\n\t@echo "\u53ef\u7528\u547d\u4ee4\uff1a"\n\t@echo "  install    - \u5b89\u88c5\u9879\u76ee\u4f9d\u8d56"\n\t@echo "  run        - \u8fd0\u884c\u751f\u4ea7\u670d\u52a1\u5668"\n\t@echo "  dev        - \u8fd0\u884c\u5f00\u53d1\u670d\u52a1\u5668\uff08\u81ea\u52a8\u91cd\u8f7d\uff09"\n\t@echo "  test       - \u8fd0\u884c\u6d4b\u8bd5"\n\t@echo "  clean      - \u6e05\u7406\u4e34\u65f6\u6587\u4ef6"\n\t@echo "  help       - \u663e\u793a\u6b64\u5e2e\u52a9\u4fe1\u606f"\n\n# \u5b89\u88c5\u4f9d\u8d56\ninstall:\n\t@if [ ! -d ".venv" ]; then \\\n\t\t@echo "\ud83d\udce6 \u521b\u5efa\u865a\u62df\u73af\u5883..."; \\\n\t\t$(PYTHON) -m venv $(VENV); \\\n\telse \\\n\t\techo "Virtual environment already exists."; \\\n\tfi\n\t@echo "\ud83d\udce6 \u5b89\u88c5\u4f9d\u8d56..."\n\t$(ACTIVATE) && pip install -U pip uv -i https://mirrors.cernet.edu.cn/pypi/web/simple\n\t$(ACTIVATE) && uv pip install -r requirements.txt -i https://mirrors.cernet.edu.cn/pypi/web/simple\n\t$(ACTIVATE) && $(VENV)/bin/pre-commit install\n\t@echo "\u2705 \u4f9d\u8d56\u5b89\u88c5\u5b8c\u6210"\n\n# \u8fd0\u884c\u751f\u4ea7\u670d\u52a1\u5668\nrun:\n\t@echo "Starting production server on $(SERVER_HOST):$(SERVER_PORT)"\n\tuvicorn main:app --host $(SERVER_HOST) --port $(SERVER_PORT)\n\n# \u8fd0\u884c\u5f00\u53d1\u670d\u52a1\u5668\ndev:\n\t@echo "Starting development server on $(SERVER_HOST):$(SERVER_PORT)"\n\tuvicorn main:app --host $(SERVER_HOST) --port $(SERVER_PORT) --reload\n\n# \u8fd0\u884c\u6d4b\u8bd5\ntest:\n\t$(PYTHON) -m pytest tests/ -v\n\n# \u6e05\u7406\u4e34\u65f6\u6587\u4ef6\nclean:\n\trm -rf __pycache__/\n\trm -rf */__pycache__/\n\trm -rf */*/__pycache__/\n\tfind . -type f -name "*.pyc" -delete\n\tfind . -type d -name "__pycache__" -delete\n\n'})})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(p,{...n})}):p(n)}}}]);